
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>@statwonk</title>
  <meta name="author" content="Christopher P. Peters">

  
  <meta name="description" content="The manufacturers of Japan will tell you of W. Edwards Deming. His famous 1950s lectures in Japan popularized quality control and continuous &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://statwonk.github.io/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="@statwonk" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1432163-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">@statwonk</a></h1>
  
    <h2>mostly data science, statistics and applications.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:statwonk.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/about/">About</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li style="padding-left:1em;"><a href="https://twitter.com/statwonk" class="twitter-follow-button"
  data-show-count="false" data-size="large">Follow @statwonk</a>
<script>!function(d,s,id){var
js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,
'script', 'twitter-wjs');</script>
</li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      
          <h1 class="entry-title"><a href="/blog/2013/10/11/how-statisticians-lost-their-business-mojo/">How Statisticians Lost Their Business Mojo</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-10-11T09:45:00-04:00" pubdate data-updated="true">Oct 11<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/10/11/how-statisticians-lost-their-business-mojo/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The manufacturers of Japan will tell you of W. Edwards Deming.  His famous 1950s lectures in Japan popularized quality control and continuous improvement. Six sigma strategy is born out of Deming&rsquo;s vision.</p>

<p><img class="left" src="/images/deming.gif" width="200" height="250" title="Deming" ></p>

<p>Consider when you drink your Guiness beer, world reknown, that it&rsquo;s recipe was
perfected by a statistician, W. S. Gosset.  (He created the t-distribution in
1909 to do this).</p>

<p><span style="font-weight:bold">These statisticians had an amazing sense of business mojo.</span></p>

<p>Since the 1960s, we [statisticians] have lost this mojo.  And the reason is that
they&rsquo;ve followed R.A. Fisher&rsquo;s significance testing orthodoxy without question.  Fisher created the p-value we know today and many
think of as synonymous with statistics.  P-value measures precision, not effect size.  That&rsquo;s it, that&rsquo;s why our business mojo is gone. P-values are the gate keeper to academic publication, NOT effect sizes.</p>

<p>Effect size is &ldquo;oomph&rdquo;, &ldquo;mojo&rdquo;, &ldquo;level of profit&rdquo;, &ldquo;return on investment.&rdquo;  Yet
statistician&rsquo;s obsession with the p-value and precision alone leads to
hilariously inept results.</p>

<p>Take this extract from a leading journal of management science,</p>

<blockquote><p>Our first hypothesis suggested that visionary leadership was related to higher<br/>levels of internal and external cooperation.  We used two measures to represent<br/>internal and external cooperation, quality philosophy and supplier cooperation.<br/>Top management team involvement, our measure of visionary leadership, was<br/>significantly related to both quality philosophy (t = 10.80, p < .001) and<br/>suplier involvement (t = 7.59, p < .001). <span style="background-color: #ffe026">Therefore, Hypothesis I is supported.</span></p><footer><strong>Thomas J. Douglas and Lawrence D. Fredendall</strong> <cite>Decision Sciences 35 (3 Summer 2004)</cite></footer></blockquote>


<p>Notice that there&rsquo;s zero mention of effect size?  Just that the p-values are
less than 0.05.  Ironically this article is titled, &ldquo;Evaluating the Deming
Management Model of Total Quality in Services.&rdquo;  So how much did Deming&rsquo;s model
contribute to internal and external cooperation?  The authors never say.  They
technically report it in one table, but never mention it as a conclusion of
worth.</p>

<p>This is what Deming says about significance testing,</p>

<blockquote><p>Ther are many other books on so-called quality control [Deming wrote].  Each<br/>book has something good in it, and nearly every author is a friend and colleague<br/>of mine.  Most of the books nevertheless contain bear traps, such as reject<br/>limits, &#8230; areas under the normal curve, acceptangce sampling &#8230; The student<br/> should also <span style="background-color: #ffe026">avoid passages in books that treat confidence intervals and tests of<br/>significance, as such calculations have no appliction in analytic problems in science and industry.</span></p><footer><strong>Deming</strong> <cite><a href='http://books.google.com/books?id=JWLIRr_ROgAC&pg=PA116&lpg=PA116&dq=avoid+passages+in+books+that+treat+confidence+intervals+and+tests+ofsignificance,+as+such+calculations+have+no+appliction+in+analytic+problems+in+science+and+industry&source=bl&ots=GvsUzNkqEf&sig=B0otz7pBntQaNhEocw4hFaWBl_U&hl=en&sa=X&ei=KjJYUtjIEMTgyQGthICADw&redir_esc=y#v=onepage&q=avoid%20passages%20in%20books%20that%20treat%20confidence%20intervals%20and%20tests%20ofsignificance%2C%20as%20such%20calculations%20have%20no%20appliction%20in%20analytic%20problems%20in%20science%20and%20industry&f=false'>1982</a></cite></footer></blockquote>


<p><span style="background-color:#ffe026">So how can statisticians get their business mojo back?</span></p>

<p>As <a href="http://www.deirdremccloskey.com/docs/jsm.pdf">Stephen T. Ziliak and Deirdre McCloskey</a> note, &ldquo;Deming himself asked of any service or product how in the eyes of the user it could be improved. No matter.&rdquo;</p>

<p>Fisher (p-value inventor) was very much against using measures of
productivity, profit, reliability, etc. in science. He states the difference,</p>

<blockquote><p>I am casting no contempt on acceptance procedures [read effect size, read profit, revenue, cost reduction], and I am thankful, whenever I travel by air, that the high level of precision and reliability required can really be achieved by such means.  But the logical differences between such an operation and the work of scientific discovery by physical or biological experimentation seem to me so wide that the analogy between them is not helpful, and the identification of the two sorts of operation is decidedly misleading.</p><footer><strong>Fisher</strong> <cite><a href='http://www.phil.vt.edu/dmayo/personal_website/Fisher-1955.pdf'>1955</a></cite></footer></blockquote>


<p><span style="background-color: #ffe026">So Fisher is very quietly telling us, yes, my methods are not for
business.  They&rsquo;re for science.</span>  The massive implications of that for past research aside, what can we replace Fisher&rsquo;s methods with?</p>

<p>We want to apply newer more sophisticated methods that respect effect sizes, and will lead us to large gains for the company.  If we have to go back over the mechanism with Fisherian testing to enhance precision, fine.  Search for large effects first as Deming&rsquo;s philosophy suggests.</p>

<p>We should also listen to Leo Brieman when he suggests, &ldquo;we can move away from exclusive dependence on data models and adopt a more diverse set of tools.&rdquo;  In his seminal,&ldquo;<a href="http://projecteuclid.org/DPubS?service=UI&amp;version=1.0&amp;verb=Display&amp;handle=euclid.ss/1009213726">Statistical Modeling: The Two Cultures</a>,&rdquo; he proposes statisticians be humble in the face of problems.  Refrain from imposing linearity and variable selection by tests of significance (p-values).  Instead minimize rates of error in held out test set data using a training set.  This opens up a HUGE new space to do analysis, all without p-values! Non-parametric methods like <a href="http://stackoverflow.com/questions/tagged/random-forest"><code>random-forest</code></a>, SVM, boosting, bagging, sophisticated loss functions (read maximizing revenue with respect to minimizing cost, profit!).</p>

<p>There are other methods, too, such as Bayesian inference.  These methods are really great for giving you degrees of a belief in a hypothesis.  If you&rsquo;re working on marketing problems, like I am, then you know pretty well ahead of time what to expect in terms of a conversion rate.  And if you use Chi-square or t-tests to choose winners, you know that your experiments commonly require 200k plus participants to achieve statistical significance (p-value &lt; .05) even for a 20% increase in conversion rate.  Fishers methods are much much too coarse for web app startup companies.  Instead, we&rsquo;re more accepting of Type 1 error, which for us is that a marketing campaign under performs.  We are also looking for ostensibly the best user experience possible, or increase in profit, something meaninful in effect size: a game changer.  Amazingly, Fisher will miss these game changers.  Bayes methods allow us to use our prior knowledge that conversion rates range between 1 &ndash; 5% (and follow a beta distribution) to get much more sensitive tools.</p>

<p><span style="font-weight:bold">Summary:</span></p>

<ol>
<li><span style="background-color:#ffe026">Don&rsquo;t use p-values and significance testing in business.</span></li>
<li>Use algoritmic methods that minimize or maximize something that matters to you.</li>
<li>Focus on the effect size (Deming).  Let&rsquo;s be certain of having a meaningful effect on our customer&rsquo;s experience, not just certainty about some effect regardless of of the size (Fisher).</li>
</ol>


<p>Who am I to critize 70+ years of statistical application?  I&rsquo;m a data
scientist, a business statistician who tried to use Fisherian methods in
business.  I have quickly learned that they&rsquo;re nearly useless here.
Instead, there&rsquo;s a whole new set of useful tools that open up to the
business analyst that realizes significance testing is nearly worthless.
We&rsquo;ll no longer be plagued with a lack of observations.  W.S. Gosset was able to
improve Guinness beer sometimes 3 obsevations at a time.  No longer will the
practicioners (marketers, management, stakeholders) scratch their head when you
come back with a 30% a/b test lift and a p-value of 0.60.  Neither will they be
fluxomed when you say, &ldquo;look, the p-value is less than .05, we have a
relationship here!&rdquo;  So, what?  If you are very certain that you convert 2 more
users out of 1 billion clicks, who cares?  What Deming, Gossett, and now myself
are looking for are large effect sizes, even if they vary!</p>

<p>I have to give huge thanks to Stephen T. Ziliak and Deirdre N. McCloskey for
nurturing my thoughts in this area, who&rsquo;s book, &ldquo;<a href="http://projecteuclid.org/DPubS?service=UI&amp;version=1.0&amp;verb=Display&amp;handle=euclid.ss/1009213726">The Cult of Statistical Significance</a>&rdquo; should revolutionize scientific statistical application, even if it fails to do so like those before those authors.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      
          <h1 class="entry-title"><a href="/blog/2013/10/06/the-p-in-p-value-does-not-stand-for-profit-dot/">P-value Does Not Stand for Profit.</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-10-06T16:26:00-04:00" pubdate data-updated="true">Oct 6<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/10/06/the-p-in-p-value-does-not-stand-for-profit-dot/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>With the data science revolution, a whole new round of statisticans will be thrust into dealing with business problems.  What they&rsquo;re bound to find is that their beloved p-value is not going to stand up to the market as it does in academic journals.  For the past thirty years, the computational cost of the simple t-test has fallen dramatically, while the academic reward of publication has stayed the same.  The result is that more newly minted analysts than ever are confused by the blank stare they receive from their manager when they tell the manager, &ldquo;these two samples are statistically significantly different at the 5% level.&rdquo;  The manager asks, &ldquo;<span style="background-color:#ffe026">so what? How much profit will we make?</span>&rdquo; To which the statistician replies, &ldquo;<span style="background-color:#ffe026">the p-value is less than 5%.</span>&rdquo;</p>

<p><span style="background-color:#ffe026"></span>
Here&rsquo;s one simple example. Suppose I have two site variations I want to test.  I&rsquo;d like to test a new red button against our old green button.  I&rsquo;m interested to know if the red button outperforms green with respect to clicks.</p>

<p>We&rsquo;ll simulate this with the <code>R</code> language.  We can draw a <code>0</code> or <code>1</code> with known probabilities to model our buttons.  I&rsquo;ll set the conversion rate for the green button at 3% and 5% for our new red button, a 66% percent improvement.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'>old_green_button <span class="o">&lt;-</span> rbinom<span class="p">(</span>n <span class="o">=</span> <span class="m">100000</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> p <span class="o">=</span> <span class="m">0.03</span><span class="p">)</span>
</span><span class='line'>new_red_button <span class="o">&lt;-</span> rbinom<span class="p">(</span>n <span class="o">=</span> <span class="m">100000</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> p <span class="o">=</span> <span class="m">0.05</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>prop.test<span class="p">(</span>table<span class="p">(</span>old_green_button<span class="p">,</span> new_red_button<span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>In the code above, I first randomly generate <code>100k</code> binomial outcomes (really bernoulli r.v.) for each button. Remember, the conversion rates are 3% and 5%, respectively.  Next, I apply the Chi-square test for equality of proportions.  This is the standard statistical test for testing if two proportions (conv. rates) come from the same population.  That is, should I expect these two buttons to yield a different conversion rate (and profit) going forward?</p>

<p>Below are the results from one run, and despite the new red button being 66%
better than the green button, our p-value sits at 90%, well above the
traditional statistician&rsquo;s 5% p-value cutoff.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'><span class="m">2</span><span class="o">-</span>sample test <span class="kr">for</span> equality of proportions with continuity correction
</span><span class='line'>
</span><span class='line'>data<span class="o">:</span>  table<span class="p">(</span>old_green_button<span class="p">,</span> new_red_button<span class="p">)</span>
</span><span class='line'>X<span class="o">-</span>squared <span class="o">=</span> <span class="m">0.0185</span><span class="p">,</span> df <span class="o">=</span> <span class="m">1</span><span class="p">,</span> p<span class="o">-</span>value <span class="o">=</span> <span class="m">0.8919</span>
</span><span class='line'>alternative hypothesis<span class="o">:</span> two.sided
</span><span class='line'><span class="m">95</span> percent confidence interval<span class="o">:</span>
</span><span class='line'> <span class="m">-0.008662492</span>  <span class="m">0.007240556</span>
</span><span class='line'> sample estimates<span class="o">:</span>
</span><span class='line'>    prop <span class="m">1</span>    prop <span class="m">2</span>
</span><span class='line'>    <span class="m">0.9498581</span> <span class="m">0.9505691</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, I&rsquo;ll repeat this experiment 1000 times and show you how the p-value
shakes out.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'>library<span class="p">(</span>ggplot2<span class="p">)</span>
</span><span class='line'>library<span class="p">(</span>ggthemes<span class="p">)</span>
</span><span class='line'>
</span><span class='line'>times <span class="o">&lt;-</span> <span class="m">1000</span>
</span><span class='line'>p_values <span class="o">&lt;-</span> rep<span class="p">(</span><span class="kc">NA</span><span class="p">,</span> times<span class="p">)</span>
</span><span class='line'><span class="kr">for</span><span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span>times<span class="p">){</span>
</span><span class='line'>  set.seed<span class="p">(</span>i<span class="p">)</span>
</span><span class='line'>  old_green_button <span class="o">&lt;-</span> rbinom<span class="p">(</span>n <span class="o">=</span> <span class="m">100000</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> p <span class="o">=</span> <span class="m">0.03</span><span class="p">)</span>
</span><span class='line'>  new_red_button <span class="o">&lt;-</span> rbinom<span class="p">(</span><span class="m">100000</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> p <span class="o">=</span> <span class="m">0.05</span><span class="p">)</span>
</span><span class='line'>  p_values<span class="p">[</span>i<span class="p">]</span> <span class="o">&lt;-</span> prop.test<span class="p">(</span>table<span class="p">(</span>old_green_button<span class="p">,</span>
</span><span class='line'>                                 new_red_button<span class="p">))</span><span class="o">$</span>p.value
</span><span class='line'>
</span><span class='line'>  print<span class="p">(</span>i<span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>df <span class="o">&lt;-</span> as.data.frame<span class="p">(</span>p_values<span class="p">)</span>
</span><span class='line'>ggplot<span class="p">(</span>df<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> p_values<span class="p">))</span> <span class="o">+</span>
</span><span class='line'>  geom_density<span class="p">(</span>fill <span class="o">=</span> <span class="s">&quot;grey50&quot;</span><span class="p">,</span> alpha <span class="o">=</span> <span class="m">0.5</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>  geom_vline<span class="p">(</span>xintercept <span class="o">=</span> <span class="m">0.05</span><span class="p">,</span> colour <span class="o">=</span> <span class="s">&quot;red&quot;</span><span class="p">,</span> size <span class="o">=</span> <span class="m">2</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>  ggtitle<span class="p">(</span><span class="s">&quot;Only 6% of p-values are less than 0.05&quot;</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>    ylab<span class="p">(</span><span class="s">&quot;Density&quot;</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>    xlab<span class="p">(</span><span class="s">&quot;P-values&quot;</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>  theme_few<span class="p">()</span> <span class="o">+</span>
</span><span class='line'>  theme<span class="p">(</span>axis.text <span class="o">=</span> element_text<span class="p">(</span>size <span class="o">=</span> <span class="m">15</span><span class="p">),</span>
</span><span class='line'>        plot.title <span class="o">=</span> element_text<span class="p">(</span>size <span class="o">=</span> <span class="m">20</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>The result shows that only 6% of p-values will be less than 0.05%!  The
sacred statistical decision rule would have you leave a 66% percent
conversion rate increase on the table and this is why p-value does not stand for profit.</p>

<p><img src="http://i.imgur.com/9vl6z1x.png"></img></p>

<p>In my next post, I&rsquo;ll analyze exactly why using p-values above other
methods leads the data scientist astray.  I&rsquo;ll introduce how I use Bayesian
analysis to avoid the p-value pitfall.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      
          <h1 class="entry-title"><a href="/blog/2013/09/27/reading-csv-data-into-r/">&#8216;Reading CSV Data Into R&#8217;</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-09-27T12:27:00-04:00" pubdate data-updated="true">Sep 27<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/09/27/reading-csv-data-into-r/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There are a variety of ways to import data into R.</p>

<p>I most often work with CSV files.  In my experience, getting the file path
correct is the trickiest part of bringing data into R.  I&rsquo;m going to show you how
this works by first writing a piece of data to a CSV file and then we&rsquo;ll bring it back
in.</p>

<p>The <code>data()</code> function in R allows access to tons of toy datasets.  R programmers
typically use these to <a href="http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example">create reproducible examples</a> on sites like StackOverflow.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'>data<span class="p">(</span>mtcars<span class="p">)</span> <span class="c1"># first I get some toy data, so now we have access to the mtcars data.frame</span>
</span><span class='line'>
</span><span class='line'>head<span class="p">(</span>mtcars<span class="p">)</span> <span class="c1"># Let&#39;s take a look</span>
</span><span class='line'>
</span><span class='line'>                  mpg cyl disp  hp drat    wt  qsec vs am gear carb
</span><span class='line'>Mazda RX4         <span class="m">21.0</span>   <span class="m">6</span>  <span class="m">160</span> <span class="m">110</span> <span class="m">3.90</span> <span class="m">2.620</span> <span class="m">16.46</span>  <span class="m">0</span>  <span class="m">1</span> <span class="m">4</span>    <span class="m">4</span>
</span><span class='line'>Mazda RX4 Wag     <span class="m">21.0</span>   <span class="m">6</span>  <span class="m">160</span> <span class="m">110</span> <span class="m">3.90</span> <span class="m">2.875</span> <span class="m">17.02</span>  <span class="m">0</span>  <span class="m">1</span> <span class="m">4</span>    <span class="m">4</span>
</span><span class='line'>Datsun <span class="m">710</span>        <span class="m">22.8</span>   <span class="m">4</span>  <span class="m">108</span>  <span class="m">93</span> <span class="m">3.85</span> <span class="m">2.320</span> <span class="m">18.61</span>  <span class="m">1</span>  <span class="m">1</span> <span class="m">4</span>    <span class="m">1</span>
</span><span class='line'>Hornet <span class="m">4</span> Drive    <span class="m">21.4</span>   <span class="m">6</span>  <span class="m">258</span> <span class="m">110</span> <span class="m">3.08</span> <span class="m">3.215</span> <span class="m">19.44</span>  <span class="m">1</span>  <span class="m">0</span> <span class="m">3</span>    <span class="m">1</span>
</span><span class='line'>Hornet Sportabout <span class="m">18.7</span>   <span class="m">8</span>  <span class="m">360</span> <span class="m">175</span> <span class="m">3.15</span> <span class="m">3.440</span> <span class="m">17.02</span>  <span class="m">0</span>  <span class="m">0</span> <span class="m">3</span>    <span class="m">2</span>
</span><span class='line'>Valiant           <span class="m">18.1</span>   <span class="m">6</span>  <span class="m">225</span> <span class="m">105</span> <span class="m">2.76</span> <span class="m">3.460</span> <span class="m">20.22</span>  <span class="m">1</span>  <span class="m">0</span> <span class="m">3</span>    <span class="m">1</span>
</span><span class='line'>
</span><span class='line'>str<span class="p">(</span>mtcars<span class="p">)</span> <span class="c1"># we can see how each variable is coded here: num, chr, list, int, etc.</span>
</span><span class='line'>
</span><span class='line'><span class="s">&#39;data.frame&#39;</span><span class="o">:</span><span class="m">32</span> obs. of  <span class="m">11</span> variables<span class="o">:</span>
</span><span class='line'>  <span class="o">$</span> mpg <span class="o">:</span> num  <span class="m">21</span> <span class="m">21</span> <span class="m">22.8</span> <span class="m">21.4</span> <span class="m">18.7</span> <span class="m">18.1</span> <span class="m">14.3</span> <span class="m">24.4</span> <span class="m">22.8</span> <span class="m">19.2</span> <span class="kc">...</span>
</span><span class='line'>  <span class="o">$</span> cyl <span class="o">:</span> num  <span class="m">6</span> <span class="m">6</span> <span class="m">4</span> <span class="m">6</span> <span class="m">8</span> <span class="m">6</span> <span class="m">8</span> <span class="m">4</span> <span class="m">4</span> <span class="m">6</span> <span class="kc">...</span>
</span><span class='line'>  <span class="o">$</span> disp<span class="o">:</span> num  <span class="m">160</span> <span class="m">160</span> <span class="m">108</span> <span class="m">258</span> <span class="m">360</span> <span class="kc">...</span>
</span><span class='line'>  <span class="o">$</span> hp  <span class="o">:</span> num  <span class="m">110</span> <span class="m">110</span> <span class="m">93</span> <span class="m">110</span> <span class="m">175</span> <span class="m">105</span> <span class="m">245</span> <span class="m">62</span> <span class="m">95</span> <span class="m">123</span> <span class="kc">...</span>
</span><span class='line'>  <span class="o">$</span> drat<span class="o">:</span> num  <span class="m">3.9</span> <span class="m">3.9</span> <span class="m">3.85</span> <span class="m">3.08</span> <span class="m">3.15</span> <span class="m">2.76</span> <span class="m">3.21</span> <span class="m">3.69</span> <span class="m">3.92</span> <span class="m">3.92</span> <span class="kc">...</span>
</span><span class='line'>  <span class="o">$</span> wt  <span class="o">:</span> num  <span class="m">2.62</span> <span class="m">2.88</span> <span class="m">2.32</span> <span class="m">3.21</span> <span class="m">3.44</span> <span class="kc">...</span>
</span><span class='line'>  <span class="o">$</span> qsec<span class="o">:</span> num  <span class="m">16.5</span> <span class="m">17</span> <span class="m">18.6</span> <span class="m">19.4</span> <span class="m">17</span> <span class="kc">...</span>
</span><span class='line'>  <span class="o">$</span> vs  <span class="o">:</span> num  <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="kc">...</span>
</span><span class='line'>  <span class="o">$</span> am  <span class="o">:</span> num  <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="kc">...</span>
</span><span class='line'>  <span class="o">$</span> gear<span class="o">:</span> num  <span class="m">4</span> <span class="m">4</span> <span class="m">4</span> <span class="m">3</span> <span class="m">3</span> <span class="m">3</span> <span class="m">3</span> <span class="m">4</span> <span class="m">4</span> <span class="m">4</span> <span class="kc">...</span>
</span><span class='line'>  <span class="o">$</span> carb<span class="o">:</span> num  <span class="m">4</span> <span class="m">4</span> <span class="m">1</span> <span class="m">1</span> <span class="m">2</span> <span class="m">1</span> <span class="m">4</span> <span class="m">2</span> <span class="m">2</span> <span class="m">4</span> <span class="kc">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>So we have a <code>data.frame</code> with 32 observations and 11 variables.  Now let&rsquo;s
use <code>write.csv()</code>. First we&rsquo;ll take a look at the inputs for the function. We
can do this by putting a <code>?</code> in front of our empty function and running it with
<code>R</code>.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'><span class="o">?</span>write.csv <span class="c1"># put a ? in front of any function to see its help page.</span>
</span></code></pre></td></tr></table></div></figure>


<p>We&rsquo;re brought to <a href="http://stat.ethz.ch/R-manual/R-devel/library/utils/html/write.table.html">this page</a> which shows all the options we can use.  For now, we&rsquo;re only going to use the first two arguments (or parameters, which ever you prefer): <code>x</code>, some object and <code>file= ""</code>.</p>

<p>If you use Linux, Mac, or Unix:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'>write.csv<span class="p">(</span>mtcars<span class="p">,</span> file <span class="o">=</span> <span class="s">&quot;~/mtcars.csv&quot;</span><span class="p">)</span> <span class="c1"># &lt;-- that file path would tell a Unix</span>
</span><span class='line'>system to save the CSV <span class="kr">in</span> the home directory.
</span></code></pre></td></tr></table></div></figure>


<p>If you use Windows (Windows is not the OS you want to be programming R in, but
it&rsquo;s okay to start on):</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'>write.csv<span class="p">(</span>mtcars<span class="p">,</span> file <span class="o">=</span> <span class="s">&quot;C:/Users/Chris/Documents/mtcars.csv&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Notice the direction of the backslashes in the Windows path?  It&rsquo;s the opposite
of how Windows does it.  The <code>\</code> character is considered special in R.  You can
simply convert all the <code>\</code> backslashes that Windows shows you in a filepath to
<code>/</code> forward slashes.  If you wanted to get fancy, you could actually put two
backslashes, like this instead of single forward slashes <code>C:\\temp\\some-file.csv</code>.</p>

<p>Both of these would work, <code>C:\\temp\\some-file.csv</code> and <code>C:/temp/some-file.csv</code>,
while <code>C:\temp\some-file.csv</code> will not.</p>

<p>Now that we know the exact path of the file, let&rsquo;s read it back in to R.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'>my_data_frame <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;~/mtcars.csv&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>or for Windows:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'>my_data_frame <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;C:/Users/Chris/Documents/mtcars.csv&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>I&rsquo;d encourage you to read <a href="http://stat.ethz.ch/R-manual/R-devel/library/utils/html/read.table.html">the documentation</a> on the <code>read.csv()</code>.</p>

<p>You&rsquo;ll notice that when we take a look at the imported data the variables are
coded differently.  This is because <code>read.csv()</code> looks at your data and makes a
guess about which type they should be: <code>character</code>, <code>numeric</code>, <code>int</code>, <code>factor</code>,
etc.  Commonly you&rsquo;ll want to control this with options like <code>stringsAsFactors =
FALSE</code>.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'><span class="s">&#39;data.frame&#39;</span><span class="o">:</span><span class="m">32</span> obs. of  <span class="m">12</span> variables<span class="o">:</span>
</span><span class='line'>   <span class="o">$</span> X   <span class="o">:</span> Factor w<span class="o">/</span> <span class="m">32</span> levels <span class="s">&quot;AMC Javelin&quot;</span><span class="p">,</span>..<span class="o">:</span> <span class="m">18</span> <span class="m">19</span> <span class="m">5</span> <span class="m">13</span> <span class="m">14</span> <span class="m">31</span> <span class="m">7</span> <span class="m">21</span> <span class="m">20</span> <span class="m">22</span> <span class="kc">...</span>
</span><span class='line'>   <span class="o">$</span> mpg <span class="o">:</span> num  <span class="m">21</span> <span class="m">21</span> <span class="m">22.8</span> <span class="m">21.4</span> <span class="m">18.7</span> <span class="m">18.1</span> <span class="m">14.3</span> <span class="m">24.4</span> <span class="m">22.8</span> <span class="m">19.2</span> <span class="kc">...</span>
</span><span class='line'>   <span class="o">$</span> cyl <span class="o">:</span> int  <span class="m">6</span> <span class="m">6</span> <span class="m">4</span> <span class="m">6</span> <span class="m">8</span> <span class="m">6</span> <span class="m">8</span> <span class="m">4</span> <span class="m">4</span> <span class="m">6</span> <span class="kc">...</span>
</span><span class='line'>   <span class="o">$</span> disp<span class="o">:</span> num  <span class="m">160</span> <span class="m">160</span> <span class="m">108</span> <span class="m">258</span> <span class="m">360</span> <span class="kc">...</span>
</span><span class='line'>   <span class="o">$</span> hp  <span class="o">:</span> int  <span class="m">110</span> <span class="m">110</span> <span class="m">93</span> <span class="m">110</span> <span class="m">175</span> <span class="m">105</span> <span class="m">245</span> <span class="m">62</span> <span class="m">95</span> <span class="m">123</span> <span class="kc">...</span>
</span><span class='line'>   <span class="o">$</span> drat<span class="o">:</span> num  <span class="m">3.9</span> <span class="m">3.9</span> <span class="m">3.85</span> <span class="m">3.08</span> <span class="m">3.15</span> <span class="m">2.76</span> <span class="m">3.21</span> <span class="m">3.69</span> <span class="m">3.92</span> <span class="m">3.92</span> <span class="kc">...</span>
</span><span class='line'>   <span class="o">$</span> wt  <span class="o">:</span> num  <span class="m">2.62</span> <span class="m">2.88</span> <span class="m">2.32</span> <span class="m">3.21</span> <span class="m">3.44</span> <span class="kc">...</span>
</span><span class='line'>   <span class="o">$</span> qsec<span class="o">:</span> num  <span class="m">16.5</span> <span class="m">17</span> <span class="m">18.6</span> <span class="m">19.4</span> <span class="m">17</span> <span class="kc">...</span>
</span><span class='line'>   <span class="o">$</span> vs  <span class="o">:</span> int  <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="kc">...</span>
</span><span class='line'>   <span class="o">$</span> am  <span class="o">:</span> int  <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="kc">...</span>
</span><span class='line'>   <span class="o">$</span> gear<span class="o">:</span> int  <span class="m">4</span> <span class="m">4</span> <span class="m">4</span> <span class="m">3</span> <span class="m">3</span> <span class="m">3</span> <span class="m">3</span> <span class="m">4</span> <span class="m">4</span> <span class="m">4</span> <span class="kc">...</span>
</span><span class='line'>   <span class="o">$</span> carb<span class="o">:</span> int  <span class="m">4</span> <span class="m">4</span> <span class="m">1</span> <span class="m">1</span> <span class="m">2</span> <span class="m">1</span> <span class="m">4</span> <span class="m">2</span> <span class="m">2</span> <span class="m">4</span> <span class="kc">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s all for now.  Next time we&rsquo;ll do some basic visualization of this
dataset.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      
          <h1 class="entry-title"><a href="/blog/2013/09/22/placing-knitr-chunks-in-a-table/">&#8216;Placing Knitr Chunks in a Table&#8217;</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-09-22T10:42:00-04:00" pubdate data-updated="true">Sep 22<span>nd</span>, 2013</time>
        
         | <a href="/blog/2013/09/22/placing-knitr-chunks-in-a-table/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="yihui.name/knitr/">knitr</a> is as the tagline says, &lsquo;elegant, flexible and fast dynamic report generation with R&rsquo;.</p>

<p>Basically, knitr allows you to embed R in LaTeX documents (and HTML documents, too!).  It gives you a large amount of control over how the R output appears in the document.</p>

<p>The following is a <a href="http://stackoveflow.com">Stackoverflow</a> question
that I answered: <a href="http://stackoverflow.com/questions/18936330/placing-knitr-chunks-including-plots-inside-a-latex-layout-table/18937206#18937206">placing knitr chunks including plots inside a LaTeX layout (table)</a>.</p>

<p>The author was having difficulties with this code snippet:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='latex'><span class='line'><span class="k">\documentclass</span><span class="nb">{</span>article<span class="nb">}</span>
</span><span class='line'><span class="k">\usepackage</span><span class="nb">{</span>float<span class="nb">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>
</span><span class='line'>  <span class="k">\begin</span><span class="nb">{</span>table<span class="nb">}</span>
</span><span class='line'>    <span class="k">\begin</span><span class="nb">{</span>tabular<span class="nb">}{</span>ll<span class="nb">}</span>
</span><span class='line'>    A <span class="nb">&amp;</span>
</span><span class='line'>    &lt;&lt;results1&gt;&gt;=
</span><span class='line'>    plot(1,1)
</span><span class='line'>    @ <span class="k">\\</span>
</span><span class='line'>    B <span class="nb">&amp;</span>
</span><span class='line'>    &lt;&lt;results2&gt;&gt;=
</span><span class='line'>    table(rnorm(10))
</span><span class='line'>    @
</span><span class='line'>    <span class="k">\end</span><span class="nb">{</span>tabular<span class="nb">}</span>
</span><span class='line'>  <span class="k">\end</span><span class="nb">{</span>table<span class="nb">}</span>
</span><span class='line'><span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>My solution was to move <code>\\</code> from line 10 to its own line, change the first chunk&rsquo;s option <code>echo=FALSE</code> to false. I also put the second bit of R code in an inline block using the <code>\Sexpr{}</code> command and appended a new line break <code>\\</code>.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='latex'><span class='line'><span class="k">\documentclass</span><span class="nb">{</span>article<span class="nb">}</span>
</span><span class='line'><span class="k">\usepackage</span><span class="nb">{</span>float<span class="nb">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>
</span><span class='line'>  <span class="k">\begin</span><span class="nb">{</span>table<span class="nb">}</span>
</span><span class='line'>    <span class="k">\begin</span><span class="nb">{</span>tabular<span class="nb">}{</span>ll<span class="nb">}</span>
</span><span class='line'>    A <span class="nb">&amp;</span>
</span><span class='line'>    &lt;&lt;results1, echo=FALSE&gt;&gt;=
</span><span class='line'>    plot(1,1)
</span><span class='line'>    @
</span><span class='line'>    <span class="k">\\</span>
</span><span class='line'>    B <span class="nb">&amp;</span> <span class="k">\Sexpr</span><span class="nb">{</span>table(rnorm(10))<span class="nb">}</span>
</span><span class='line'>    <span class="k">\\</span>
</span><span class='line'>    <span class="k">\end</span><span class="nb">{</span>tabular<span class="nb">}</span>
</span><span class='line'>  <span class="k">\end</span><span class="nb">{</span>table<span class="nb">}</span>
</span><span class='line'><span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Enjoyed playing with this little chunk of knitr!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      
          <h1 class="entry-title"><a href="/blog/2013/09/17/activemodel-dirty/">&#8216;ActiveModel::Dirty&#8217;</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-09-17T18:13:00-04:00" pubdate data-updated="true">Sep 17<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/09/17/activemodel-dirty/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Today, I was briefly introduced to ActiveModel::Dirty.  The source
documentation
<a href="http://api.rubyonrails.org/classes/ActiveModel/Dirty.html">here</a> shows a
minimal example:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Person</span>
</span><span class='line'>  <span class="kp">include</span> <span class="ss">ActiveModel</span><span class="p">:</span><span class="ss">:Dirty</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">define_attribute_methods</span> <span class="ss">:name</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">name</span>
</span><span class='line'>    <span class="vi">@name</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">name</span><span class="o">=</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</span><span class='line'>    <span class="n">name_will_change!</span> <span class="k">unless</span> <span class="n">val</span> <span class="o">==</span> <span class="vi">@name</span>
</span><span class='line'>    <span class="vi">@name</span> <span class="o">=</span> <span class="n">val</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">save</span>
</span><span class='line'>    <span class="vi">@previously_changed</span> <span class="o">=</span> <span class="n">changes</span>
</span><span class='line'>    <span class="vi">@changed_attributes</span><span class="o">.</span><span class="n">clear</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>In the end, I had to choose a different method because of <a href="http://stackoverflow.com/questions/13074582/problems-implementing-activemodel-dirty-rails-3-2-8">this
reason</a>. Stashing this here for later because ActiveModel::Dirty methods look cool!</p>

<p>The _was method particularly looks cool.  Great for keeping track of
changes to models.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/02/14/mawk-or-awk/">Mawk or Awk? Munging Large Log Files</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/07/passing-a-rails-array-to-javascript/">Passing a Rails Array to JavaScript in Well-formed JSON</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/02/dipping-my-toe-in-the-node-dot-js-waters/">Dipping My Toes in the JavaScript and Node.js Waters</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/18/resizing-tmux-panes-with-the-bind-key/">Resizing Tmux Panes With the Bind-key</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/05/visualizing-diabetes-data/">Visualizing My Bionic Partner&#8217;s Data</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/15/are-academics-adopting-github/">Are Academics Adopting Github?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/24/washing-dishes-with-bayes/">Washing Dishes With Bayes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/03/goodbye-scripts/">Goodbye Scripts, Hello R Packages!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/03/5-cool-unix-hacks-for-fun-and-productivity/">5 Cool Unix Hacks for Fun and Productivity</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/26/taking-a-quick-peek-at-fda-drug-reactions/">Taking a Quick Peek at FDA Adverse Drug Reactions</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/11/how-statisticians-lost-their-business-mojo/">How Statisticians Lost Their Business Mojo</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/06/the-p-in-p-value-does-not-stand-for-profit-dot/">P-value Does Not Stand for Profit.</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/27/reading-csv-data-into-r/">&#8216;Reading CSV Data Into R&#8217;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/22/placing-knitr-chunks-in-a-table/">&#8216;Placing Knitr Chunks in a Table&#8217;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/17/activemodel-dirty/">&#8216;ActiveModel::Dirty&#8217;</a>
      </li>
    
  </ul>
</section>
<a href="http://stackoverflow.com/users/1408640/statwonk">
<img src="http://stackoverflow.com/users/flair/1408640.png" width="208" height="58" alt="profile for Statwonk at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for Statwonk at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
</a>
<a href="https://twitter.com/statwonk" class="twitter-follow-button"
  data-show-count="false" data-size="large">Follow @statwonk</a>
<script>!function(d,s,id){var
js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,
'script', 'twitter-wjs');</script>
<br><br>
<script src="//platform.linkedin.com/in.js"
type="text/javascript"></script>
<script type="IN/MemberProfile" data-id="http://www.linkedin.com/in/statwonk"
data-format="hover" data-text="Christopher Peters"></script>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/u/1/111908970327115332394/posts?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/statwonk">@statwonk</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'statwonk',
            count: 8,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Christopher P. Peters -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'statwonk';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
